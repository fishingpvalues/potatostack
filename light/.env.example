################################################################################
# PotatoStack Light - Docker Compose Environment Configuration
# Copy this file to .env and fill in your actual values
# NEVER commit the .env file to git - it contains sensitive passwords!
################################################################################

################################################################################
# Network Configuration
################################################################################
# Your local network subnet (for Gluetun firewall)
LAN_NETWORK=192.168.178.0/24

# Le Potato IP address (bind services to this IP for LAN access)
HOST_BIND=192.168.178.40

# Domain for service URLs (optional, defaults to lepotato.local)
HOST_DOMAIN=lepotato.local

################################################################################
# Storage Configuration (REQUIRED)
################################################################################
# This stack requires two mounted drives:
# - /mnt/storage (14TB) - Main storage for downloads, photos, files, backups
# - /mnt/cachehdd (500GB) - Cache HDD for temp files, incomplete downloads, DB cache
#
# Mount your drives in /etc/fstab:
# UUID=xxx-xxx /mnt/storage ext4 defaults 0 2
# UUID=yyy-yyy /mnt/cachehdd ext4 defaults 0 2
#
# Then run: sudo ./quick-start.sh

################################################################################
# VPN Configuration (Gluetun with Surfshark)
################################################################################
# Get credentials from: https://my.surfshark.com/vpn/manual-setup/main
SURFSHARK_USER=your_surfshark_service_credentials_username
SURFSHARK_PASSWORD=your_surfshark_service_credentials_password

# Server selection (customize for your location)
SURFSHARK_COUNTRY=Netherlands
SURFSHARK_CITY=Amsterdam
SURFSHARK_CONNECTION_TYPE=openvpn

# VPN DNS server (single IP only - Gluetun doesn't support comma-separated)
VPN_DNS=1.1.1.1

# Gluetun Monitor - VPN connection monitoring interval (in seconds)
# Checks VPN status and auto-restarts dependent containers on reconnect
GLUETUN_CHECK_INTERVAL=10

################################################################################
# Transmission (Torrent Client)
################################################################################
TRANSMISSION_USER=admin
TRANSMISSION_PASSWORD=change_this_transmission_password

################################################################################
# slskd (Soulseek Client)
################################################################################
# Web UI credentials
SLSKD_USER=admin
SLSKD_PASSWORD=change_this_slskd_password
# Soulseek network credentials (your actual Soulseek account)
SLSKD_SOULSEEK_USERNAME=your_soulseek_username
SLSKD_SOULSEEK_PASSWORD=your_soulseek_password
# Get API key from slskd WebUI: Settings > Application > API Key
# Leave empty on first run, then get from UI after setup
SLSKD_API_KEY=

################################################################################
# Vaultwarden (Password Manager)
################################################################################
# Generate admin token with: openssl rand -base64 32
VAULTWARDEN_ADMIN_TOKEN=change_this_to_a_secure_random_token

# Allow new user signups (set to false in production)
VAULTWARDEN_SIGNUPS_ALLOWED=false

# Allow existing users to invite others
VAULTWARDEN_INVITATIONS_ALLOWED=true

################################################################################
# Kopia (Central Backup Server for All Network Devices)
################################################################################
# Repository encryption password (required for all clients)
KOPIA_PASSWORD=change_this_to_a_very_strong_password

# Server admin credentials (for connecting clients from all devices)
KOPIA_SERVER_USER=admin
KOPIA_SERVER_PASSWORD=change_this_to_another_strong_password


################################################################################
# Portainer (Container Management)
################################################################################
# Get API key from Portainer: User Settings > Access tokens
# Leave empty on first run, then get from UI after setup
PORTAINER_API_KEY=

################################################################################
# Syncthing (P2P File Sync)
################################################################################
# Hostname for Syncthing instance (visible to other devices)
SYNCTHING_HOSTNAME=potatostack-sync
# Get API key from Syncthing WebUI: Settings > General > API Key
# Leave empty on first run, then get from UI after setup
SYNCTHING_API_KEY=


################################################################################
# Docker Image Tags (pinned versions)
################################################################################
# VPN & P2P
GLUETUN_TAG=latest
QBITTORRENT_TAG=latest
SLSKD_TAG=0.24.1

# Applications
VAULTWARDEN_TAG=latest
PORTAINER_TAG=2.20.3
IMMICH_TAG=release
KOPIA_TAG=0.15.0
SEAFILE_TAG=latest
RUSTYPASTE_TAG=latest
FILEBROWSER_TAG=latest
SYNCTHING_TAG=latest
TRANSMISSION_TAG=latest

# Monitoring
FRITZBOX_EXPORTER_TAG=latest
WATCHTOWER_TAG=latest
AUTOHEAL_TAG=latest
HOMEPAGE_TAG=latest

################################################################################
# Service Access Ports (based on HOST_BIND)
################################################################################
# Homepage Dashboard:     http://HOST_BIND:3000
# Gluetun Control:        http://HOST_BIND:8000
# Transmission WebUI:     http://HOST_BIND:9091
# slskd WebUI:           http://HOST_BIND:2234
# Syncthing WebUI:       http://HOST_BIND:8384
# FileBrowser:           http://HOST_BIND:8181
# Vaultwarden:           http://HOST_BIND:8080
# Vaultwarden WebSocket: http://HOST_BIND:3012
# Portainer:             https://HOST_BIND:9443
# Kopia:                 https://HOST_BIND:51515
# Kopia Metrics:         http://HOST_BIND:51516

################################################################################
# Quick Start Instructions
################################################################################
# 1. Copy this file to .env: cp .env.example .env
# 2. Edit .env and fill in your actual values
# 3. Update HOST_BIND to your server's IP address
# 4. Configure Surfshark VPN credentials
# 5. Generate strong passwords for all services
# 6. Mount your drives (/mnt/storage and /mnt/cachehdd)
# 7. Start the stack: ./quick-start.sh
# 8. Check logs: docker compose logs -f
# 9. Access services via http://HOST_BIND:PORT

################################################################################
# Backup Strategy with Kopia
################################################################################
# Kopia server runs at https://HOST_BIND:51515
# This is a CENTRAL BACKUP SERVER for ALL devices on your network
#
# All devices (laptops, desktops, phones, tablets, servers) can connect
# to this Kopia server with full read/write backup access
#
# The Kopia server has direct access to local stack data including:
#   - Vaultwarden (password vault)
#   - All Syncthing folders (OneDrive mirror + media)
#   - Transmission downloads
#   - slskd shared files
#
# Install Kopia client on any device and connect to this server

################################################################################
# Storage Strategy - Cache HDD Optimization
################################################################################
# 14TB HDD (/mnt/storage):     Final storage for all data
# 500GB SSD (/mnt/cachehdd):   High-speed cache for temporary operations
#
# Cache HDD Usage:
#   - Transmission incomplete downloads (moved to /mnt/storage when complete)
#   - slskd incomplete downloads (moved to /mnt/storage when complete)
#   - Kopia cache (deduplication chunks, metadata cache)
#   - Syncthing file versioning (.stversions)
#
# This minimizes write operations on the 14TB HDD and extends its lifespan
