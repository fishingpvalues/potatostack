################################################################################
# PotatoStack Main Environment Configuration
# Target: Mini PC with 16GB RAM, 4+ core CPU, 1GB ethernet
# Copy this file to .env and fill in your actual values
# NEVER commit the .env file to git - it contains sensitive passwords!
################################################################################

################################################################################
# NETWORK CONFIGURATION
################################################################################
# Network interface/IP to bind service ports
HOST_BIND=192.168.178.40
# Local network subnet for VPN firewall
LAN_NETWORK=192.168.178.0/24
# Domain for services (can be local or public domain)
HOST_DOMAIN=local.domain
# Email for Let's Encrypt SSL certificates
ACME_EMAIL=admin@example.com

################################################################################
# CORE DATABASES
################################################################################
# PostgreSQL superuser password
POSTGRES_SUPER_PASSWORD=change_this_postgres_super_password
# Comma-separated list of databases to create
# NOTE: The init script creates these on postgres startup
POSTGRES_DATABASES=nextcloud,firefly,authentik,gitea,immich,calibre,linkding,n8n,healthchecks,stirlingpdf

# Database for Grafana (uses superuser access)
# Grafana will create its own tables on startup

# MongoDB
MONGO_ROOT_PASSWORD=change_this_mongo_root_password

# Redis (shared instance) - no password needed for internal use

################################################################################
# VPN CONFIGURATION (Gluetun + Tailscale + WireGuard)
################################################################################
# Gluetun VPN - For torrent/download clients
VPN_PROVIDER=surfshark
VPN_TYPE=openvpn
VPN_USER=your_vpn_username
VPN_PASSWORD=your_vpn_password
VPN_COUNTRY=Germany

# Gluetun Monitor - VPN connection monitoring interval (in seconds)
# Checks VPN status and auto-restarts dependent containers on reconnect
GLUETUN_CHECK_INTERVAL=10

# Tailscale - Mesh VPN for remote access (RECOMMENDED - easiest)
# Get key from: https://login.tailscale.com/admin/settings/keys
TAILSCALE_AUTHKEY=tskey-auth-your_tailscale_auth_key_here

# WireGuard Server - For VPS gateway or advanced users
# SERVERURL: Your public IP or DynDNS (e.g., fritz.duckdns.org)
# Leave as 'auto' to auto-detect public IP
WIREGUARD_SERVERURL=auto
WIREGUARD_SERVERPORT=51820
# PEERS: Comma-separated list of peer names (each gets a config)
WIREGUARD_PEERS=vps,android,laptop,tablet,raspberry
WIREGUARD_PEERDNS=auto
WIREGUARD_INTERNAL_SUBNET=10.13.13.0/24
WIREGUARD_ALLOWEDIPS=0.0.0.0/0
WIREGUARD_LOG_CONFS=true

################################################################################
# REVERSE PROXY & SSL
################################################################################
# Traefik is main proxy on ports 80/443
# Nginx Proxy Manager is alternative on ports 8081/4443/81

################################################################################
# AUTHENTICATION & SECURITY
################################################################################
# Authentik SSO - Generate with: openssl rand -base64 32
# NOTE: Authentik 2025.10+ no longer requires Redis
AUTHENTIK_DB_PASSWORD=change_this_authentik_db_password
AUTHENTIK_SECRET_KEY=change_this_authentik_secret_key_64_chars_min

# Vaultwarden Password Manager - Generate with: openssl rand -base64 32
VAULTWARDEN_ADMIN_TOKEN=change_this_to_a_secure_random_token
VAULTWARDEN_SIGNUPS_ALLOWED=false
VAULTWARDEN_INVITATIONS_ALLOWED=true

################################################################################
# CLOUD STORAGE & FILE SYNC
################################################################################
# Nextcloud All-in-One (SOTA 2025)
# Includes Collabora Office, Talk, Whiteboard, and more
# No separate database needed - managed by AIO
# Access AIO interface at http://HOST_BIND:8080
# Nextcloud at http://HOST_BIND:8443

################################################################################
# KNOWLEDGE MANAGEMENT
################################################################################
# CouchDB - For Obsidian LiveSync (SOTA 2025)
COUCHDB_USER=admin
COUCHDB_PASSWORD=change_this_couchdb_password
# After setup, configure Obsidian plugin:
# Server: http://HOST_BIND:5984
# Database: obsidian
# Username: admin
# Password: [COUCHDB_PASSWORD]

################################################################################
# FINANCE
################################################################################
# Firefly III - Generate APP_KEY with: php artisan key:generate
FIREFLY_DB_PASSWORD=change_this_firefly_db_password
FIREFLY_APP_KEY=base64:your_firefly_app_key_here
FIREFLY_ACCESS_TOKEN=get_from_firefly_after_setup

# Optional: GoCardless / Nordigen for bank sync
NORDIGEN_ID=
NORDIGEN_KEY=

# Optional: Spectre for bank sync
SPECTRE_APP_ID=
SPECTRE_SECRET=

################################################################################
# MEDIA - ARR STACK
################################################################################
# All *arr apps use the same structure, no passwords needed for internal use

################################################################################
# DOWNLOAD CLIENTS (behind VPN)
################################################################################
# qBittorrent Torrent Client
# Automatically downloads to /mnt/cachehdd/qbittorrent-incomplete
# and moves completed files to /mnt/storage/downloads
# Default credentials: admin/adminadmin (change in WebUI at first login)

################################################################################
# Aria2 Download Manager
# Advanced download manager with BT/HTTP/FTP/Metalink support
# Downloads to /mnt/storage/aria2-downloads
# Incomplete files cached at /mnt/cachehdd/aria2-incomplete
# WebUI: http://HOST_BIND:6880 (AriaNg)
# Configure RPC secret in AriaNg settings
ARIA2_RPC_SECRET=change_this_aria2_rpc_secret

# slskd - Soulseek P2P client
# Web UI credentials
SLSKD_USER=admin
SLSKD_PASSWORD=change_this_slskd_password
# Soulseek network credentials (your actual Soulseek account)
SLSKD_SOULSEEK_USERNAME=your_soulseek_username
SLSKD_SOULSEEK_PASSWORD=your_soulseek_password
# Get API key from slskd WebUI: Settings > Application > API Key
# Leave empty on first run, then get from UI after setup
SLSKD_API_KEY=

################################################################################
# MONITORING & OBSERVABILITY
################################################################################
# Grafana
GRAFANA_USER=admin
GRAFANA_PASSWORD=change_this_grafana_password
GRAFANA_PLUGINS=

# Prometheus retention
PROMETHEUS_RETENTION_DAYS=30d

# Fritzbox Exporter (optional)
FRITZ_USERNAME=
FRITZ_PASSWORD=your_fritzbox_admin_password
FRITZ_HOSTNAME=fritz.box

################################################################################
# AUTOMATION & WORKFLOWS
################################################################################
# n8n
N8N_USER=admin
N8N_PASSWORD=change_this_n8n_password

# Huginn - Generate with: openssl rand -hex 32
HUGINN_SECRET_TOKEN=change_this_huginn_secret_token
HUGINN_INVITATION_CODE=change_this_invitation_code

# Healthchecks
HEALTHCHECKS_ADMIN_EMAIL=admin@example.com
HEALTHCHECKS_ADMIN_PASSWORD=change_this_healthchecks_password
HEALTHCHECKS_SECRET_KEY=change_this_healthchecks_secret_key

################################################################################
# UTILITIES & TOOLS
################################################################################
# Linkding
LINKDING_ADMIN_USER=admin
LINKDING_ADMIN_PASSWORD=change_this_linkding_password

# Cal.com - Generate with: openssl rand -base64 32
CALCOM_NEXTAUTH_SECRET=change_this_calcom_nextauth_secret
CALCOM_ENCRYPTION_KEY=change_this_calcom_encryption_key

# Atuin - Shell history sync (uses shared postgres)
ATUIN_HOST=0.0.0.0
ATUIN_PORT=8888

# Code Server
CODE_SERVER_PASSWORD=change_this_code_server_password
CODE_SERVER_SUDO_PASSWORD=change_this_code_server_sudo_password

################################################################################
# DEVELOPMENT & GIT
################################################################################
# Gitea
GITEA_TAG=latest
GITEA_RUNNER_TOKEN=get_from_gitea_after_setup

# Calibre-web - Ebook management (optional, uses shared postgres)
# Access: http://HOST_BIND:8083
# Note: Calibre-web uses SQLite by default, configure for PostgreSQL if needed
CALIBRE_DB_PASSWORD=change_this_calibre_db_password

# Drone CI
DRONE_GITEA_CLIENT_ID=get_from_gitea_oauth_app
DRONE_GITEA_CLIENT_SECRET=get_from_gitea_oauth_app
DRONE_RPC_SECRET=change_this_drone_rpc_secret
DRONE_ADMIN_USER=your_gitea_username

# Sentry
SENTRY_DB_PASSWORD=change_this_sentry_db_password
SENTRY_SECRET_KEY=change_this_sentry_secret_key

################################################################################
# AI & SPECIAL APPLICATIONS
################################################################################
# Open WebUI - For local LLM interaction
OLLAMA_BASE_URL=http://host.docker.internal:11434
OPEN_WEBUI_SECRET_KEY=change_this_open_webui_secret_key

# OctoBot - Crypto trading bot (configure in web UI after first start)

################################################################################
# ELASTICSEARCH STACK
################################################################################
ELASTIC_PASSWORD=change_this_elastic_password

################################################################################
# BACKUPS
################################################################################
# Kopia - Fast and secure backups
KOPIA_PASSWORD=change_this_kopia_password
KOPIA_SERVER_USER=admin
KOPIA_SERVER_PASSWORD=change_this_kopia_server_password

################################################################################
# FILE SYNC & SHARING
################################################################################
# Syncthing - P2P file synchronization
# Hostname for Syncthing instance (visible to other devices)
SYNCTHING_HOSTNAME=potatostack-sync
# Get API key from Syncthing WebUI: Settings > General > API Key
# Leave empty on first run, then get from UI after setup
SYNCTHING_API_KEY=

# Portainer - Container management
# Get API key from Portainer: User Settings > Access tokens
# Leave empty on first run, then get from UI after setup
PORTAINER_API_KEY=

################################################################################
# SYSTEM UTILITIES
################################################################################
# Diun - Docker Image Update Notifier (SOTA 2025 best practice)
# Monitors for updates but doesn't auto-update (safer than Watchtower)
# Notification options (optional - choose one or more):

# Gotify
DIUN_GOTIFY_ENDPOINT=
DIUN_GOTIFY_TOKEN=

# Discord
DIUN_DISCORD_WEBHOOK=

# Telegram
DIUN_TELEGRAM_TOKEN=
DIUN_TELEGRAM_CHATIDS=

################################################################################
# IMAGE TAGS (pinned versions for stability)
################################################################################
# Core
ALPINE_TAG=latest
POSTGRES_TAG=16-alpine
MONGO_TAG=7
REDIS_TAG=7-alpine
ADMINER_TAG=latest

# Reverse Proxy
TRAEFIK_TAG=latest
NPM_TAG=latest

# Authentication
AUTHENTIK_TAG=latest
VAULTWARDEN_TAG=latest

# VPN
GLUETUN_TAG=latest
TAILSCALE_TAG=latest

# Cloud Storage
NEXTCLOUD_AIO_TAG=latest
SYNCTHING_TAG=latest

# Knowledge Management
COUCHDB_TAG=latest
CURL_TAG=latest

# Finance
FIREFLY_TAG=latest
FIREFLY_IMPORTER_TAG=latest

# Media Management
PROWLARR_TAG=latest
SONARR_TAG=latest
RADARR_TAG=latest
LIDARR_TAG=latest
READARR_TAG=develop
BAZARR_TAG=latest
MAINTAINERR_TAG=latest
JELLYFIN_TAG=latest
JELLYSEERR_TAG=latest
OVERSEERR_TAG=latest
AUDIOBOOKSHELF_TAG=latest

# Downloads
QBITTORRENT_TAG=latest
ARIA2_TAG=latest
ARIANG_TAG=latest

# Photos
IMMICH_TAG=release

# Monitoring
PROMETHEUS_TAG=latest
GRAFANA_TAG=latest
LOKI_TAG=latest
PROMTAIL_TAG=latest
NODE_EXPORTER_TAG=latest
CADVISOR_TAG=latest
FRITZBOX_EXPORTER_TAG=latest
NETDATA_TAG=latest
UPTIME_KUMA_TAG=latest

# Automation
N8N_TAG=latest
HUGINN_TAG=latest
HEALTHCHECKS_TAG=latest

# Utilities
RUSTYPASTE_TAG=latest
STIRLING_PDF_TAG=latest
LINKDING_TAG=latest
CALCOM_TAG=latest
CODE_SERVER_TAG=latest
DRAWIO_TAG=latest
EXCALIDRAW_TAG=latest
ATUIN_TAG=latest

# Development
GITEA_TAG=latest
GITEA_RUNNER_TAG=latest
DRONE_TAG=latest
DRONE_RUNNER_TAG=latest
SENTRY_TAG=latest

# AI & Special
OPEN_WEBUI_TAG=main
OCTOBOT_TAG=latest
PINCHFLAT_TAG=latest

# Elasticsearch
ELASTICSEARCH_TAG=8.11.0
KIBANA_TAG=8.11.0
LOGSTASH_TAG=8.11.0

# Dashboard
GLANCE_TAG=latest

# System
DIUN_TAG=latest
AUTOHEAL_TAG=latest
PORTAINER_TAG=latest

# VPN Tags
WIREGUARD_TAG=latest

# Downloads & P2P
SLSKD_TAG=latest

# Backups
KOPIA_TAG=latest

################################################################################
# Notes:
# - Copy this file to .env and fill in real values
# - Generate strong passwords/secrets for all services
# - Update HOST_BIND to your server's IP
# - Configure VPN credentials for services behind Gluetun
# - Set up Tailscale for secure remote access
# - Configure domain and SSL for production use
#
# Quick generation commands:
# - Password: openssl rand -base64 32
# - Secret key: openssl rand -hex 64
# - API key: openssl rand -hex 32
#
# Service URLs (after setup):
# - Traefik Dashboard: http://traefik.HOST_DOMAIN:8080
# - Grafana: http://grafana.HOST_DOMAIN
# - Prometheus: http://HOST_BIND:9090
# - Jellyfin: http://jellyfin.HOST_DOMAIN
# - Immich: http://immich.HOST_DOMAIN
# - Nextcloud AIO: http://HOST_BIND:8443
# - Gitea: http://git.HOST_DOMAIN
# - n8n: http://n8n.HOST_DOMAIN:5678
# - Cal.com: http://cal.HOST_DOMAIN
# - Authentik: http://authentik.HOST_DOMAIN:9000
################################################################################

# RSS & News Aggregation
MINIFLUX_TAG=latest
MINIFLUX_ADMIN_USER=admin
MINIFLUX_ADMIN_PASSWORD=changeme

# Monitoring & Observability
PROMETHEUS_TAG=latest
GRAFANA_TAG=latest
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=changeme
NETDATA_TAG=latest
NETDATA_CLAIM_TOKEN=
NETDATA_CLAIM_ROOMS=
# Thanos Long-term Storage
THANOS_TAG=latest

# cAdvisor Container Metrics
CADVISOR_TAG=latest
