{
  "dashboard": {
    "id": null,
    "uid": "smartctl-disk-health",
    "title": "Disk Health & SMART Monitoring",
    "tags": ["smart", "disk", "health", "storage", "sota-2025"],
    "timezone": "browser",
    "schemaVersion": 39,
    "version": 1,
    "refresh": "1m",
    "panels": [
      {
        "collapsed": false,
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0},
        "id": 1,
        "panels": [],
        "title": "Critical SMART Attributes - Failure Prediction",
        "type": "row"
      },
      {
        "datasource": "Prometheus",
        "description": "CRITICAL: Any value > 0 indicates disk failure imminent. 20-60x more likely to fail within 60 days.",
        "fieldConfig": {
          "defaults": {
            "unit": "short",
            "decimals": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 1, "color": "red"}
              ]
            }
          }
        },
        "gridPos": {"h": 5, "w": 8, "x": 0, "y": 1},
        "id": 2,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "values": false,
            "calcs": ["lastNotNull"],
            "fields": ""
          },
          "textMode": "value_and_name"
        },
        "pluginVersion": "11.0.0",
        "targets": [
          {
            "expr": "smartctl_device_smart_status{job=\"smartctl\"} or smartmon_attr_raw_value{name=\"reallocated_sector_ct\"}",
            "legendFormat": "{{device}} - Reallocated Sectors",
            "refId": "A"
          }
        ],
        "title": "Reallocated Sectors (CRITICAL)",
        "type": "stat"
      },
      {
        "datasource": "Prometheus",
        "description": "CRITICAL: Sectors waiting for reallocation. Non-zero = imminent failure.",
        "fieldConfig": {
          "defaults": {
            "unit": "short",
            "decimals": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 1, "color": "red"}
              ]
            }
          }
        },
        "gridPos": {"h": 5, "w": 8, "x": 8, "y": 1},
        "id": 3,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "values": false,
            "calcs": ["lastNotNull"],
            "fields": ""
          },
          "textMode": "value_and_name"
        },
        "pluginVersion": "11.0.0",
        "targets": [
          {
            "expr": "smartmon_attr_raw_value{name=\"current_pending_sector\"}",
            "legendFormat": "{{device}} - Pending Sectors",
            "refId": "A"
          }
        ],
        "title": "Current Pending Sectors (CRITICAL)",
        "type": "stat"
      },
      {
        "datasource": "Prometheus",
        "description": "CRITICAL: 39x more likely to fail after first uncorrectable error.",
        "fieldConfig": {
          "defaults": {
            "unit": "short",
            "decimals": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 1, "color": "red"}
              ]
            }
          }
        },
        "gridPos": {"h": 5, "w": 8, "x": 16, "y": 1},
        "id": 4,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "values": false,
            "calcs": ["lastNotNull"],
            "fields": ""
          },
          "textMode": "value_and_name"
        },
        "pluginVersion": "11.0.0",
        "targets": [
          {
            "expr": "smartmon_attr_raw_value{name=\"offline_uncorrectable\"}",
            "legendFormat": "{{device}} - Uncorrectable",
            "refId": "A"
          }
        ],
        "title": "Uncorrectable Sectors (CRITICAL)",
        "type": "stat"
      },
      {
        "collapsed": false,
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 6},
        "id": 5,
        "panels": [],
        "title": "SSD/NVMe Health Metrics",
        "type": "row"
      },
      {
        "datasource": "Prometheus",
        "description": "Percentage of rated write endurance consumed. Alert at >= 80%.",
        "fieldConfig": {
          "defaults": {
            "unit": "percent",
            "decimals": 1,
            "min": 0,
            "max": 100,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 80, "color": "orange"},
                {"value": 95, "color": "red"}
              ]
            }
          }
        },
        "gridPos": {"h": 6, "w": 12, "x": 0, "y": 7},
        "id": 6,
        "options": {
          "orientation": "auto",
          "reduceOptions": {
            "values": false,
            "calcs": ["lastNotNull"],
            "fields": ""
          },
          "showThresholdLabels": true,
          "showThresholdMarkers": true
        },
        "pluginVersion": "11.0.0",
        "targets": [
          {
            "expr": "smartctl_device_percentage_used{job=\"smartctl\"}",
            "legendFormat": "{{device}}",
            "refId": "A"
          }
        ],
        "title": "SSD Percentage Used (Wear)",
        "type": "gauge"
      },
      {
        "datasource": "Prometheus",
        "description": "Available spare capacity vs threshold. Alert when spare reaches threshold.",
        "fieldConfig": {
          "defaults": {
            "unit": "percent",
            "decimals": 1,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 10, "color": "orange"},
                {"value": 5, "color": "red"}
              ]
            }
          }
        },
        "gridPos": {"h": 6, "w": 12, "x": 12, "y": 7},
        "id": 7,
        "options": {
          "legend": {"displayMode": "list", "placement": "bottom", "showLegend": true},
          "tooltip": {"mode": "multi", "sort": "none"}
        },
        "targets": [
          {
            "expr": "smartctl_device_available_spare{job=\"smartctl\"}",
            "legendFormat": "{{device}} - Available Spare",
            "refId": "A"
          },
          {
            "expr": "smartctl_device_available_spare_threshold{job=\"smartctl\"}",
            "legendFormat": "{{device}} - Threshold",
            "refId": "B"
          }
        ],
        "title": "NVMe Available Spare",
        "type": "timeseries"
      },
      {
        "collapsed": false,
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 13},
        "id": 8,
        "panels": [],
        "title": "Temperature & Power-On Hours",
        "type": "row"
      },
      {
        "datasource": "Prometheus",
        "description": "Disk temperature in Celsius. Alert > 50Â°C.",
        "fieldConfig": {
          "defaults": {
            "unit": "celsius",
            "decimals": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 45, "color": "yellow"},
                {"value": 50, "color": "red"}
              ]
            }
          }
        },
        "gridPos": {"h": 7, "w": 12, "x": 0, "y": 14},
        "id": 9,
        "options": {
          "legend": {"displayMode": "table", "placement": "bottom", "showLegend": true, "calcs": ["lastNotNull", "max"]},
          "tooltip": {"mode": "multi", "sort": "desc"}
        },
        "targets": [
          {
            "expr": "smartctl_device_temperature{job=\"smartctl\"} or smartmon_attr_raw_value{name=\"temperature_celsius\"}",
            "legendFormat": "{{device}}",
            "refId": "A"
          }
        ],
        "title": "Disk Temperature",
        "type": "timeseries"
      },
      {
        "datasource": "Prometheus",
        "description": "Total hours the disk has been powered on",
        "fieldConfig": {
          "defaults": {
            "unit": "h",
            "decimals": 0,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 26280, "color": "yellow"},
                {"value": 43800, "color": "orange"}
              ]
            }
          }
        },
        "gridPos": {"h": 7, "w": 12, "x": 12, "y": 14},
        "id": 10,
        "options": {
          "colorMode": "value",
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "values": false,
            "calcs": ["lastNotNull"],
            "fields": ""
          },
          "textMode": "value_and_name"
        },
        "pluginVersion": "11.0.0",
        "targets": [
          {
            "expr": "smartctl_device_power_on_seconds{job=\"smartctl\"} / 3600 or smartmon_attr_raw_value{name=\"power_on_hours\"}",
            "legendFormat": "{{device}}",
            "refId": "A"
          }
        ],
        "title": "Power-On Hours",
        "type": "stat"
      },
      {
        "collapsed": false,
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 21},
        "id": 11,
        "panels": [],
        "title": "Comprehensive SMART Status",
        "type": "row"
      },
      {
        "datasource": "Prometheus",
        "description": "Overall SMART health status. 1 = PASSED, 0 = FAILED",
        "fieldConfig": {
          "defaults": {
            "unit": "short",
            "mappings": [
              {"type": "value", "value": "0", "text": "FAILED"},
              {"type": "value", "value": "1", "text": "PASSED"}
            ],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": 0, "color": "red"},
                {"value": 1, "color": "green"}
              ]
            }
          }
        },
        "gridPos": {"h": 8, "w": 12, "x": 0, "y": 22},
        "id": 12,
        "options": {
          "showHeader": true,
          "sortBy": [{"displayName": "Status", "desc": false}]
        },
        "targets": [
          {
            "expr": "smartctl_device_smart_status{job=\"smartctl\"}",
            "format": "table",
            "instant": true,
            "refId": "A"
          }
        ],
        "title": "SMART Health Status",
        "transformations": [
          {
            "id": "organize",
            "options": {
              "excludeByName": {"Time": true, "__name__": true, "job": true, "instance": true},
              "renameByName": {"device": "Device", "Value": "Status"}
            }
          }
        ],
        "type": "table"
      },
      {
        "datasource": "Prometheus",
        "description": "NVMe critical warning register. 0x00 = no warnings.",
        "fieldConfig": {
          "defaults": {
            "unit": "short",
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"},
                {"value": 1, "color": "red"}
              ]
            }
          }
        },
        "gridPos": {"h": 8, "w": 12, "x": 12, "y": 22},
        "id": 13,
        "options": {
          "colorMode": "background",
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto",
          "reduceOptions": {
            "values": false,
            "calcs": ["lastNotNull"],
            "fields": ""
          },
          "textMode": "value_and_name"
        },
        "pluginVersion": "11.0.0",
        "targets": [
          {
            "expr": "smartctl_device_critical_warning{job=\"smartctl\"}",
            "legendFormat": "{{device}}",
            "refId": "A"
          }
        ],
        "title": "NVMe Critical Warning",
        "type": "stat"
      },
      {
        "collapsed": false,
        "gridPos": {"h": 1, "w": 24, "x": 0, "y": 30},
        "id": 14,
        "panels": [],
        "title": "Write Workload & Endurance",
        "type": "row"
      },
      {
        "datasource": "Prometheus",
        "description": "Total bytes written to the device (data written over lifetime)",
        "fieldConfig": {
          "defaults": {
            "unit": "decbytes",
            "decimals": 2,
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {"value": null, "color": "green"}
              ]
            }
          }
        },
        "gridPos": {"h": 8, "w": 24, "x": 0, "y": 31},
        "id": 15,
        "options": {
          "legend": {"displayMode": "table", "placement": "right", "showLegend": true, "calcs": ["lastNotNull", "mean"]},
          "tooltip": {"mode": "multi", "sort": "desc"}
        },
        "targets": [
          {
            "expr": "smartctl_device_bytes_written{job=\"smartctl\"} or smartmon_attr_raw_value{name=\"total_lbas_written\"} * 512",
            "legendFormat": "{{device}}",
            "refId": "A"
          }
        ],
        "title": "Total Bytes Written (Lifetime)",
        "type": "timeseries"
      }
    ],
    "time": {"from": "now-24h", "to": "now"},
    "timepicker": {
      "refresh_intervals": ["10s", "30s", "1m", "5m", "15m", "30m", "1h"],
      "time_options": ["5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d"]
    }
  }
}
