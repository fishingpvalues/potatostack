##############################################################################
# Glances Configuration - SOTA 2025
# Complete monitoring setup for Docker containers, system resources,
# Prometheus/Grafana integration, RSS feeds, service health, weather & calendar
##############################################################################

[global]
# Fast refresh for real-time monitoring
refresh=2
check_update=true
history_size=3600
strftime_format=%Y-%m-%d %H:%M:%S %Z

##############################################################################
# User Interface Configuration
##############################################################################

[outputs]
# Optimized left menu for comprehensive monitoring
left_menu=network,wifi,connections,ports,diskio,fs,folders,sensors,containers,now
max_processes_display=50
# WebUI configuration for remote access
url_prefix=/
cors_origins=*
cors_credentials=True
cors_methods=*
cors_headers=*

##############################################################################
# Core System Monitoring
##############################################################################

[quicklook]
disable=False
list=cpu,mem,load,swap
bar_char=|
cpu_careful=50
cpu_warning=70
cpu_critical=90
mem_careful=50
mem_warning=70
mem_critical=90
swap_careful=50
swap_warning=70
swap_critical=90
load_careful=70
load_warning=100
load_critical=500

[system]
disable=False
refresh=60
system_info_msg={hostname} | {os_name} {os_version} | {platform}

[cpu]
disable=False
iowait_careful=20
iowait_warning=30
iowait_critical=50
total_careful=65
total_warning=75
total_critical=85
total_log=True
user_careful=50
user_warning=70
user_critical=90
system_careful=50
system_warning=70
system_critical=90
steal_careful=50
steal_warning=70
steal_critical=90

[percpu]
disable=False
max_cpu_display=8
user_careful=50
user_warning=70
user_critical=90
iowait_careful=40
iowait_warning=60
iowait_critical=80
system_careful=50
system_warning=70
system_critical=90

[gpu]
disable=False
proc_careful=50
proc_warning=70
proc_critical=90
mem_careful=50
mem_warning=70
mem_critical=90
temperature_careful=60
temperature_warning=70
temperature_critical=80

[mem]
disable=False
available=True
careful=50
warning=70
critical=90

[memswap]
disable=False
careful=50
warning=70
critical=90

[load]
disable=False
careful=0.7
warning=1.0
critical=5.0

##############################################################################
# Network Monitoring
##############################################################################

[network]
disable=False
rx_careful=70
rx_warning=80
rx_critical=90
tx_careful=70
tx_warning=80
tx_critical=90
# Hide Docker networks and loopback
hide=docker.*,lo,veth.*,br-.*
hide_no_up=True
hide_no_ip=True
hide_zero=False

[ip]
disable=False
public_disabled=False
public_refresh_interval=300
public_api=https://ipv4.ipleak.net/json/
public_field=ip
public_template={ip} {continent_name}/{country_name}/{city_name}

[connections]
disable=False
nf_conntrack_percent_careful=70
nf_conntrack_percent_warning=80
nf_conntrack_percent_critical=90

[wifi]
disable=False
careful=-65
warning=-75
critical=-85

##############################################################################
# Disk & Storage Monitoring
##############################################################################

[diskio]
disable=False
hide=loop.*,/dev/loop.*
hide_zero=False
# Latency thresholds in ms
rx_latency_careful=10
rx_latency_warning=20
rx_latency_critical=50
tx_latency_careful=10
tx_latency_warning=20
tx_latency_critical=50

[fs]
disable=False
hide=/boot.*,.*/snap.*,/var/lib/docker/.*
careful=50
warning=70
critical=90
allow=overlay,shm

[folders]
disable=False
# Monitor critical directories
folder_1_path=/var/log
folder_1_careful=5000
folder_1_warning=8000
folder_1_critical=10000
folder_1_refresh=60
folder_2_path=/var/lib/docker
folder_2_careful=50000
folder_2_warning=80000
folder_2_critical=100000
folder_2_refresh=60
folder_3_path=/tmp
folder_3_careful=5000
folder_3_warning=8000
folder_3_critical=10000
folder_3_refresh=60

[raid]
disable=False

[smart]
disable=False

##############################################################################
# Sensors & Temperature Monitoring
##############################################################################

[sensors]
disable=False
refresh=5
hide=unknown.*
temperature_core_careful=50
temperature_core_warning=70
temperature_core_critical=85
temperature_hdd_careful=45
temperature_hdd_warning=52
temperature_hdd_critical=60
battery_careful=30
battery_warning=20
battery_critical=10

[hddtemp]
disable=False
host=127.0.0.1
port=7634

##############################################################################
# Process Monitoring
##############################################################################

[processcount]
disable=False
refresh=10

[processlist]
disable=False
sort_key=cpu_percent
cpu_careful=50
cpu_warning=70
cpu_critical=90
mem_careful=50
mem_warning=70
mem_critical=90
nice_warning=-20,-19,-18,-17,-16,-15,-14,-13,-12,-11,-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19
status_ok=R,W,P,I,S
status_critical=Z,D

##############################################################################
# Service Health Checks & Port Monitoring
##############################################################################

[ports]
disable=False
refresh=30
timeout=3
port_default_gateway=True
# Common service health checks
port_1_host=localhost
port_1_port=80
port_1_description=HTTP
port_1_timeout=1
port_1_rtt_warning=500
port_2_host=localhost
port_2_port=443
port_2_description=HTTPS
port_2_timeout=1
port_2_rtt_warning=500
port_3_host=localhost
port_3_port=9090
port_3_description=Prometheus
port_3_timeout=1
port_3_rtt_warning=500
port_4_host=localhost
port_4_port=3000
port_4_description=Grafana
port_4_timeout=1
port_4_rtt_warning=500
port_5_host=localhost
port_5_port=8086
port_5_description=InfluxDB
port_5_timeout=1
port_5_rtt_warning=500
# Web monitoring
web_1_url=http://localhost:3000
web_1_description=Grafana Dashboard
web_1_rtt_warning=2000
web_2_url=http://localhost:9090
web_2_description=Prometheus
web_2_rtt_warning=2000

##############################################################################
# Docker Container Monitoring
##############################################################################

[containers]
disable=False
max_name_size=30
# Show all container stats
disable_stats=
# Monitor all containers including stopped ones
all=True
# Container resource thresholds
cpu_careful=50
cpu_warning=70
cpu_critical=90
mem_careful=50
mem_warning=70
mem_critical=90
# Podman support
podman_sock=unix:///run/user/1000/podman/podman.sock

[vms]
disable=True
max_name_size=20
all=False

##############################################################################
# Alert Configuration
##############################################################################

[alert]
disable=False
max_events=50
min_duration=3
min_interval=6

##############################################################################
# Export to Prometheus (Primary)
##############################################################################

[prometheus]
# Prometheus exporter - primary monitoring backend
host=0.0.0.0
port=9091
prefix=glances
labels=src:glances,environment:production

##############################################################################
# Export to InfluxDB2 (Time-Series Storage)
##############################################################################

[influxdb2]
host=localhost
port=8086
protocol=http
org=monitoring
bucket=glances
token=PUT_YOUR_INFLUXDB2_TOKEN_HERE
interval=0
prefix=glances
tags=host:`hostname`,environment:production

##############################################################################
# Export to Grafana via RESTful API
##############################################################################

[restful]
host=0.0.0.0
port=61208
protocol=http
path=/

##############################################################################
# Additional Export Options
##############################################################################

[graph]
path=/var/lib/glances/graphs
generate_every=300
width=1200
height=800
style=DarkStyle

[elasticsearch]
scheme=http
host=localhost
port=9200
index=glances

[graphite]
host=localhost
port=2003
prefix=glances

[statsd]
host=localhost
port=8125
prefix=glances

[mqtt]
host=localhost
port=1883
tls=false
user=glances
password=glances
topic=monitoring/glances
topic_structure=per-metric
callback_api_version=2

##############################################################################
# AMPs - Application Monitoring Patterns
##############################################################################

[amps]
disable=False

# Monitor Docker daemon
[amp_docker]
enable=true
regex=.*dockerd.*
refresh=30
one_line=true
command=docker ps -q | wc -l
countmin=1

# Monitor Prometheus
[amp_prometheus]
enable=true
regex=.*prometheus.*
refresh=30
one_line=true
command=curl -s http://localhost:9090/-/healthy
countmin=1

# Monitor Grafana
[amp_grafana]
enable=true
regex=.*grafana.*
refresh=30
one_line=true
command=curl -s http://localhost:3000/api/health
countmin=1

# Monitor InfluxDB
[amp_influxdb]
enable=true
regex=.*influxd.*
refresh=30
one_line=true
command=curl -s http://localhost:8086/health
countmin=1

# Monitor Nginx/Web server
[amp_nginx]
enable=false
regex=.*nginx.*
refresh=60
one_line=false
status_url=http://localhost/nginx_status

# Monitor system services
[amp_systemd]
enable=true
regex=.*systemd.*
refresh=60
one_line=true
systemctl_cmd=/bin/systemctl --plain

# Network connection tracking
[amp_conntrack]
enable=true
refresh=60
one_line=true
command=cat /proc/sys/net/netfilter/nf_conntrack_count 2>/dev/null || echo "0"

# Monitor disk usage
[amp_disk_usage]
enable=true
refresh=120
one_line=false
command=df -h | grep -v tmpfs | grep -v loop

# Monitor Docker volumes
[amp_docker_volumes]
enable=true
refresh=120
one_line=false
command=docker system df -v

# Monitor container logs size
[amp_container_logs]
enable=true
refresh=300
one_line=false
command=du -sh /var/lib/docker/containers/*/*-json.log 2>/dev/null | sort -h | tail -10

##############################################################################
# Export Configuration
##############################################################################

[export]
# Exclude sensitive fields from export
exclude_fields=password,.*_password,token,.*_token,secret,.*_secret

##############################################################################
# Browser Mode - Remote Monitoring
##############################################################################

[serverlist]
# Define columns for remote server monitoring
columns=system:hr_name,load:min5,cpu:total,mem:percent,memswap:percent,network:rx,network:tx,diskio:read,diskio:write,containers:active
# Add remote servers here
#server_1_name=monitoring.local
#server_1_alias=Monitoring Server
#server_1_port=61208
#server_1_protocol=rest

[passwords]
# Define passwords for remote servers
#localhost=mypassword
#default=defaultpassword
