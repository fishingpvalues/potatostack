# ArgoCD Helm Values (SOTA 2025)
# Chart version: 9.1.7+
# Installation: helm install argocd argo/argo-cd -f helm/values/argocd.yaml -n argocd --create-namespace

global:
  domain: argocd.lepotato.local

server:
  replicas: 1
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 256Mi
      cpu: 500m
  ingress:
    enabled: true
    ingressClassName: nginx
    hosts:
      - argocd.lepotato.local
    tls:
      - secretName: argocd-tls
        hosts:
          - argocd.lepotato.local
  config:
    url: https://argocd.lepotato.local
    application.instanceLabelKey: argocd.argoproj.io/instance

controller:
  replicas: 1
  resources:
    requests:
      memory: 256Mi
      cpu: 250m
    limits:
      memory: 512Mi
      cpu: 1000m

repoServer:
  replicas: 1
  resources:
    requests:
      memory: 128Mi
      cpu: 100m
    limits:
      memory: 256Mi
      cpu: 500m

dex:
  enabled: false  # Use Authelia for SSO

redis:
  enabled: false  # Use external unified redis
  externalRedis:
    host: redis.potatostack.svc.cluster.local
    port: 6379

applicationSet:
  replicas: 1
  resources:
    requests:
      memory: 64Mi
      cpu: 50m
    limits:
      memory: 128Mi
      cpu: 250m

notifications:
  enabled: true
  argocdUrl: https://argocd.lepotato.local
  resources:
    requests:
      memory: 64Mi
      cpu: 50m
    limits:
      memory: 128Mi
      cpu: 250m

configs:
  params:
    server.insecure: true  # Behind ingress with TLS
  repositories:
    - url: https://github.com/danielfriedrich-xyz/vllm-windows.git
      name: potatostack
      type: git
