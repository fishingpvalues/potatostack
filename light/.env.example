################################################################################
# PotatoStack Light - Docker Compose Environment Configuration
# Copy this file to .env and fill in your actual values
# NEVER commit the .env file to git - it contains sensitive passwords!
################################################################################

################################################################################
# Network Configuration
################################################################################
# Your local network subnet (for Gluetun firewall)
LAN_NETWORK=192.168.178.0/24

# Le Potato IP address (bind services to this IP for LAN access)
HOST_BIND=192.168.178.40

# Domain for service URLs (optional, defaults to lepotato.local)
HOST_DOMAIN=lepotato.local

################################################################################
# Storage Configuration (REQUIRED)
################################################################################
# This stack requires two mounted drives:
# - /mnt/seconddrive (14TB) - Main storage for downloads, photos, files, backups
# - /mnt/cachehdd (500GB) - Cache for temp files, thumbnails
#
# Mount your drives in /etc/fstab:
# UUID=xxx-xxx /mnt/seconddrive ext4 defaults 0 2
# UUID=yyy-yyy /mnt/cachehdd ext4 defaults 0 2
#
# Then run: sudo ./setup-directories.sh

################################################################################
# VPN Configuration (Gluetun with Surfshark)
################################################################################
# Get credentials from: https://my.surfshark.com/vpn/manual-setup/main
SURFSHARK_USER=your_surfshark_service_credentials_username
SURFSHARK_PASSWORD=your_surfshark_service_credentials_password

# Server selection (customize for your location)
SURFSHARK_COUNTRY=Netherlands
SURFSHARK_CITY=Amsterdam
SURFSHARK_CONNECTION_TYPE=openvpn

# VPN DNS server (single IP only - Gluetun doesn't support comma-separated)
VPN_DNS=1.1.1.1

################################################################################
# Transmission (Torrent Client)
################################################################################
# Default credentials: admin/admin (change in docker-compose.yml if needed)

################################################################################
# slskd (Soulseek Client)
################################################################################
SLSKD_USER=admin
SLSKD_PASSWORD=change_this_slskd_password

################################################################################
# PostgreSQL Database
################################################################################
# Superuser password (used for initial setup and management)
POSTGRES_SUPER_PASSWORD=change_this_postgres_super_password

# Immich database password
IMMICH_DB_PASSWORD=change_this_immich_db_password

# Seafile database password
SEAFILE_DB_PASSWORD=change_this_seafile_db_password

################################################################################
# Vaultwarden (Password Manager)
################################################################################
# Generate admin token with: openssl rand -base64 32
VAULTWARDEN_ADMIN_TOKEN=change_this_to_a_secure_random_token

# Allow new user signups (set to false in production)
VAULTWARDEN_SIGNUPS_ALLOWED=false

# Allow existing users to invite others
VAULTWARDEN_INVITATIONS_ALLOWED=true

################################################################################
# Immich (Photo Management)
################################################################################
# Immich uses IMMICH_DB_PASSWORD defined above
# Access at: http://HOST_BIND:2283

################################################################################
# Kopia (Central Backup Server for All Network Devices)
################################################################################
# Repository encryption password (required for all clients)
KOPIA_PASSWORD=change_this_to_a_very_strong_password

# Server admin credentials (for connecting clients from all devices)
KOPIA_SERVER_USER=admin
KOPIA_SERVER_PASSWORD=change_this_to_another_strong_password

################################################################################
# Seafile (File Sync & Share)
################################################################################
SEAFILE_ADMIN_EMAIL=admin@lepotato.local
SEAFILE_ADMIN_PASSWORD=change_this_seafile_admin_password

################################################################################
# Fritz!Box Router Monitoring (optional)
################################################################################
# Leave FRITZ_USERNAME empty for default user
# Note: Your FritzBox also provides WireGuard VPN for secure remote access
FRITZ_USERNAME=
FRITZ_PASSWORD=your_fritzbox_admin_password
FRITZ_HOSTNAME=fritz.box
FRITZ_PORT=49000
FRITZ_PROTOCOL=https

################################################################################
# Docker Image Tags (pinned versions)
################################################################################
# VPN & P2P
GLUETUN_TAG=latest
QBITTORRENT_TAG=latest
SLSKD_TAG=0.21.1

# Databases
POSTGRES_TAG=pg14-v0.2.0
REDIS_TAG=7-alpine

# Applications
VAULTWARDEN_TAG=latest
PORTAINER_TAG=2.20.3
IMMICH_TAG=release
KOPIA_TAG=0.15.0
SEAFILE_TAG=latest
RUSTYPASTE_TAG=latest

# Monitoring
FRITZBOX_EXPORTER_TAG=latest

################################################################################
# Service Access Ports (based on HOST_BIND)
################################################################################
# Gluetun Control:        http://HOST_BIND:8000
# Transmission WebUI:     http://HOST_BIND:9091
# slskd WebUI:           http://HOST_BIND:2234
# Vaultwarden:           http://HOST_BIND:8080
# Vaultwarden WebSocket: http://HOST_BIND:3012
# Portainer:             https://HOST_BIND:9443
# Immich:                http://HOST_BIND:2283
# Kopia:                 https://HOST_BIND:51515
# Kopia Metrics:         http://HOST_BIND:51516
# Seafile:               http://HOST_BIND:8082
# Rustypaste:            http://HOST_BIND:8001
# FritzBox Exporter:     http://HOST_BIND:9042

################################################################################
# Quick Start Instructions
################################################################################
# 1. Copy this file to .env: cp .env.example .env
# 2. Edit .env and fill in your actual values
# 3. Update HOST_BIND to your Le Potato's IP address
# 4. Configure Surfshark VPN credentials
# 5. Generate strong passwords for all services
# 6. Start the stack: docker compose up -d
# 7. Check logs: docker compose logs -f
# 8. Access services via http://HOST_BIND:PORT

################################################################################
# Backup Strategy with Kopia
################################################################################
# Kopia server runs at https://HOST_BIND:51515
# This is a CENTRAL BACKUP SERVER for ALL devices on your network
#
# All devices (laptops, desktops, phones, tablets, servers) can connect
# to this Kopia server with full read/write backup access
#
# The Kopia server also has direct access to local stack data:
#   - /data/vaultwarden (Vaultwarden data)
#   - /data/immich-upload (Immich photos)
#   - /data/immich-library (Immich library)
#   - /data/seafile (Seafile data)
#   - /data/downloads (Transmission downloads)
#   - /data/slskd-shared (slskd files)
#
# Install Kopia client on any device and connect to this server
