# Sealed Secrets Controller
# Chart: sealed-secrets/sealed-secrets
# Encrypts secrets for safe Git commits

# Resource limits (Le Potato optimized)
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 128Mi

# Controller configuration
controller:
  # Skip TLS verification for self-signed certs
  skipTlsVerify: false

  # Update check
  updateCheck: true

  # Metrics
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      additionalLabels:
        release: prometheus

# Private key management
secretName: sealed-secrets-key

# Namespace to watch (empty = all namespaces)
namespace: ""

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 1001
  fsGroup: 65534
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  seccompProfile:
    type: RuntimeDefault

# Service
service:
  type: ClusterIP
  port: 8080
  nodePort: null

# Pod Security
podSecurityContext:
  fsGroup: 65534

# Node selector for ARM64
nodeSelector:
  kubernetes.io/arch: arm64

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Command to seal a secret:
# kubeseal --format=yaml < secret.yaml > sealed-secret.yaml
# kubectl apply -f sealed-secret.yaml
