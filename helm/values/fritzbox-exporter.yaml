# Fritz!Box Exporter - Router metrics for Prometheus
# Chart: oci://ghcr.io/bjw-s-labs/charts/app-template
# RAM: ~15MB | FritzBox router monitoring
# Installation: helm install fritzbox-exporter oci://ghcr.io/bjw-s-labs/charts/app-template -f helm/values/fritzbox-exporter.yaml -n potatostack-monitoring

controllers:
  main:
    replicas: 1
    containers:
      main:
        image:
          repository: pdreker/fritz_exporter
          tag: v2.5.0
        env:
          TZ: Europe/Berlin
          FRITZ_USERNAME:
            valueFrom:
              secretKeyRef:
                name: fritzbox-secrets
                key: FRITZ_USERNAME
                optional: true
          FRITZ_PASSWORD:
            valueFrom:
              secretKeyRef:
                name: fritzbox-secrets
                key: FRITZ_PASSWORD
                optional: true
          FRITZ_HOSTNAME: fritz.box
          FRITZ_PORT: "49000"
          FRITZ_PROTOCOL: https
        resources:
          requests:
            cpu: 25m
            memory: 32Mi
          limits:
            cpu: 100m
            memory: 64Mi

service:
  main:
    ports:
      http:
        port: 9042

ingress:
  main:
    enabled: false

# Create secret before deploying:
# kubectl create secret generic fritzbox-secrets -n potatostack-monitoring \
#   --from-literal=FRITZ_USERNAME=your_username \
#   --from-literal=FRITZ_PASSWORD=your_password
